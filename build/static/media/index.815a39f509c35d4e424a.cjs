"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),reactDom=require("react-dom"),index_cjs=require("@fullcalendar/core/index.cjs"),internal_cjs=require("@fullcalendar/core/internal.cjs");function _interopDefaultLegacy(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React);const reactMajorVersion=parseInt(String(React__default.default.version).split(".")[0]),syncRenderingByDefault=reactMajorVersion<18;class FullCalendar extends React.Component{constructor(){super(...arguments),this.elRef=React.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const t of this.state.customRenderingMap.values())e.push(React__default.default.createElement(CustomRenderingComponent,{key:t.id,customRendering:t}));return React__default.default.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new internal_cjs.CustomRenderingStore;let t;this.handleCustomRendering=e.handle.bind(e),this.calendar=new index_cjs.Calendar(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{reactDom.flushSync(()=>{})}),e.subscribe(e=>{const n=Date.now(),s=!t;(syncRenderingByDefault||s||this.isUpdating||this.isUnmounting||n-t<100?runNow:reactDom.flushSync)(()=>{this.setState({customRenderingMap:e},()=>{t=n,s?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){void 0!==this.resizeId&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}FullCalendar.act=runNow;class CustomRenderingComponent extends React.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:t}=e,n="function"===typeof t?t(e.renderProps):t;return reactDom.createPortal(n,e.containerEl)}}function runNow(e){e()}exports.default=FullCalendar;